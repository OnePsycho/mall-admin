webpackJsonp([3],{"+jJU":function(t,e){},"0mkY":function(t,e){},"9bBU":function(t,e,i){i("mClu");var a=i("FeBl").Object;t.exports=function(t,e,i){return a.defineProperty(t,e,i)}},C4MV:function(t,e,i){t.exports={default:i("9bBU"),__esModule:!0}},CmKi:function(t,e,i){"use strict";var a=i("woOf"),r=i.n(a),l=i("mRsl"),s=i("s/Rn"),n=i("UgCr"),u={name:"ProductInfoDetail",props:{value:Object,isEdit:{type:Boolean,default:!1}},data:function(){return{hasEditCreated:!1,selectProductCateValue:[],productCateOptions:[],brandOptions:[],rules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}],subTitle:[{required:!0,message:"请输入商品副标题",trigger:"blur"}],productCategoryId:[{required:!0,message:"请选择商品分类",trigger:"blur"}],brandId:[{required:!0,message:"请选择商品品牌",trigger:"blur"}],description:[{required:!0,message:"请输入商品介绍",trigger:"blur"}],requiredProp:[{required:!0,message:"该项为必填项",trigger:"blur"}]}}},created:function(){this.getProductCateList(),this.getBrandList()},computed:{productId:function(){return this.value.id}},watch:{productId:function(t){this.isEdit&&(this.hasEditCreated||void 0!==t&&null!=t&&0!==t&&this.handleEditCreated())},selectProductCateValue:function(t){null!=t&&2===t.length?(this.value.productCategoryId=t[1],this.value.productCategoryName=this.getCateNameById(this.value.productCategoryId)):(this.value.productCategoryId=null,this.value.productCategoryName=null)}},methods:{handleEditCreated:function(){null!=this.value.productCategoryId&&(this.selectProductCateValue.push(this.value.cateParentId),this.selectProductCateValue.push(this.value.productCategoryId)),this.hasEditCreated=!0},getProductCateList:function(){var t=this;Object(l.d)().then(function(e){var i=e.data;t.productCateOptions=[];for(var a=0;a<i.length;a++){var r=[];if(null!=i[a].children&&i[a].children.length>0)for(var l=0;l<i[a].children.length;l++)r.push({label:i[a].children[l].name,value:i[a].children[l].id});t.productCateOptions.push({label:i[a].name,value:i[a].id,children:r})}})},getBrandList:function(){var t=this;Object(s.c)({pageNum:1,pageSize:100}).then(function(e){t.brandOptions=[];for(var i=e.data.list,a=0;a<i.length;a++)t.brandOptions.push({label:i[a].name,value:i[a].id})})},getCateNameById:function(t){for(var e=null,i=0;i<this.productCateOptions.length;i++)for(var a=0;i<this.productCateOptions[i].children.length;a++)if(this.productCateOptions[i].children[a].value===t)return e=this.productCateOptions[i].children[a].label;return e},handleNext:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.$message({message:"验证失败",type:"error",duration:1e3}),!1;e.$emit("nextStep")})},handleBrandChange:function(t){for(var e="",i=0;i<this.brandOptions.length;i++)if(this.brandOptions[i].value===t){e=this.brandOptions[i].label;break}this.value.brandName=e}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"margin-top":"50px"}},[i("el-form",{ref:"productInfoForm",staticStyle:{width:"600px"},attrs:{model:t.value,rules:t.rules,"label-width":"120px",size:"small"}},[i("el-form-item",{attrs:{label:"商品分类：",prop:"productCategoryId"}},[i("el-cascader",{attrs:{options:t.productCateOptions},model:{value:t.selectProductCateValue,callback:function(e){t.selectProductCateValue=e},expression:"selectProductCateValue"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"商品名称：",prop:"name"}},[i("el-input",{model:{value:t.value.name,callback:function(e){t.$set(t.value,"name",e)},expression:"value.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"副标题：",prop:"subTitle"}},[i("el-input",{model:{value:t.value.subTitle,callback:function(e){t.$set(t.value,"subTitle",e)},expression:"value.subTitle"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"商品品牌：",prop:"brandId"}},[i("el-select",{attrs:{placeholder:"请选择品牌"},on:{change:t.handleBrandChange},model:{value:t.value.brandId,callback:function(e){t.$set(t.value,"brandId",e)},expression:"value.brandId"}},t._l(t.brandOptions,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"商品货号："}},[i("el-input",{model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"商品售价："}},[i("el-input",{model:{value:t.value.price,callback:function(e){t.$set(t.value,"price",e)},expression:"value.price"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"市场价："}},[i("el-input",{model:{value:t.value.originalPrice,callback:function(e){t.$set(t.value,"originalPrice",e)},expression:"value.originalPrice"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"商品库存："}},[i("el-input",{model:{value:t.value.stock,callback:function(e){t.$set(t.value,"stock",e)},expression:"value.stock"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"计量单位："}},[i("el-input",{model:{value:t.value.unit,callback:function(e){t.$set(t.value,"unit",e)},expression:"value.unit"}})],1),t._v(" "),i("el-form-item",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(e){t.handleNext("productInfoForm")}}},[t._v("下一步，填写商品促销")])],1)],1)],1)},staticRenderFns:[]};var c=i("VU/8")(u,o,!1,function(t){i("+jJU")},"data-v-2efc0148",null).exports,d=i("vLgD");var h={name:"ProductSaleDetail",props:{value:Object,isEdit:{type:Boolean,default:!1}},data:function(){return{pickerOptions1:{disabledDate:function(t){return t.getTime()<Date.now()}}}},created:function(){var t,e=this;this.isEdit||(t={defaultStatus:0},Object(d.a)({url:"/memberLevel/list",method:"get",params:t})).then(function(t){for(var i=[],a=0;a<t.data.length;a++){var r=t.data[a];i.push({memberLevelId:r.id,memberLevelName:r.name})}e.value.memberPriceList=i})},computed:{selectServiceList:{get:function(){var t=[];if(void 0===this.value.serviceIds||null==this.value.serviceIds||""===this.value.serviceIds)return t;for(var e=this.value.serviceIds.split(","),i=0;i<e.length;i++)t.push(Number(e[i]));return t},set:function(t){var e="";if(null!=t&&t.length>0){for(var i=0;i<t.length;i++)e+=t[i]+",";e.endsWith(",")&&(e=e.substr(0,e.length-1)),this.value.serviceIds=e}else this.value.serviceIds=null}}},methods:{handleEditCreated:function(){var t=this.value.serviceIds.split(",");console.log("handleEditCreated",t);for(var e=0;e<t.length;e++)this.selectServiceList.push(Number(t[e]))},handleRemoveProductLadder:function(t,e){var i=this.value.productLadderList;1===i.length?(i.pop(),i.push({count:0,discount:0,price:0})):i.splice(t,1)},handleAddProductLadder:function(t,e){var i=this.value.productLadderList;i.length<3?i.push({count:0,discount:0,price:0}):this.$message({message:"最多只能添加三条",type:"warning"})},handleRemoveFullReduction:function(t,e){var i=this.value.productFullReductionList;1===i.length?(i.pop(),i.push({fullPrice:0,reducePrice:0})):i.splice(t,1)},handleAddFullReduction:function(t,e){var i=this.value.productFullReductionList;i.length<3?i.push({fullPrice:0,reducePrice:0}):this.$message({message:"最多只能添加三条",type:"warning"})},handlePrev:function(){this.$emit("prevStep")},handleNext:function(){this.$emit("nextStep")}}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"margin-top":"50px"}},[i("el-form",{ref:"productSaleForm",staticStyle:{width:"600px"},attrs:{model:t.value,"label-width":"120px",size:"small"}},[i("el-form-item",{attrs:{label:"赠送积分："}},[i("el-input",{model:{value:t.value.giftPoint,callback:function(e){t.$set(t.value,"giftPoint",e)},expression:"value.giftPoint"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"商品关键字："}},[i("el-input",{model:{value:t.value.keywords,callback:function(e){t.$set(t.value,"keywords",e)},expression:"value.keywords"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"商品赠品："}},[i("el-input",{attrs:{type:"textarea",autoSize:!0},model:{value:t.value.note,callback:function(e){t.$set(t.value,"note",e)},expression:"value.note"}})],1),t._v(" "),i("el-form-item",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{size:"medium"},on:{click:t.handlePrev}},[t._v("上一步，填写商品信息")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.handleNext}},[t._v("下一步，填写商品属性")])],1)],1)],1)},staticRenderFns:[]};var v=i("VU/8")(h,p,!1,function(t){i("QMc+")},"data-v-bd9fef1a",null).exports,f=i("KhLR"),m=i("3idm"),g=i("TZVV"),b=i("bOdI"),P=i.n(b),k=i("//Fk"),S=i.n(k),A=i("ZW30"),y={name:"multiUpload",props:{value:Array,maxCount:{type:Number,default:5}},data:function(){return{dataObj:{policy:"",signature:"",key:"",ossaccessKeyId:"",dir:"",host:""},dialogVisible:!1,dialogImageUrl:null}},computed:{fileList:function(){for(var t=[],e=0;e<this.value.length;e++)t.push({url:this.value[e]});return t}},methods:{emitInput:function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].url);this.$emit("input",e)},handleRemove:function(t,e){this.emitInput(e)},handlePreview:function(t){this.dialogVisible=!0,this.dialogImageUrl=t.url},beforeUpload:function(t){var e=this;return new S.a(function(t,i){Object(A.a)().then(function(i){e.dataObj.policy=i.data.policy,e.dataObj.signature=i.data.signature,e.dataObj.ossaccessKeyId=i.data.accessKeyId,e.dataObj.key=i.data.dir+"/${filename}",e.dataObj.dir=i.data.dir,e.dataObj.host=i.data.host,t(!0)}).catch(function(t){console.log(t),i(!1)})})},handleUploadSuccess:function(t,e){this.fileList.push(P()({url:e.name},"url",this.dataObj.host+"/"+this.dataObj.dir+"/"+e.name)),this.emitInput(this.fileList)},handleExceed:function(t,e){this.$message({message:"最多只能上传"+this.maxCount+"张图片",type:"warning",duration:1e3})}}},x={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-upload",{attrs:{action:"http://hystkj-oss.oss-cn-shenzhen.aliyuncs.com",data:t.dataObj,"list-type":"picture-card","file-list":t.fileList,"before-upload":t.beforeUpload,"on-remove":t.handleRemove,"on-success":t.handleUploadSuccess,"on-preview":t.handlePreview,limit:t.maxCount,"on-exceed":t.handleExceed}},[i("i",{staticClass:"el-icon-plus"})]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[]};var L=i("VU/8")(y,x,!1,function(t){i("HfMK")},null,null).exports,_=i("5aCZ"),w={name:"ProductAttrDetail",components:{SingleUpload:g.a,MultiUpload:L,Tinymce:_.a},props:{value:Object,isEdit:{type:Boolean,default:!1}},data:function(){return{hasEditCreated:!1,productAttributeCategoryOptions:[],selectProductAttr:[],selectProductParam:[],selectProductAttrPics:[],addProductAttrValue:"",activeHtmlName:"pc"}},computed:{hasAttrPic:function(){return!(this.selectProductAttrPics.length<1)},productId:function(){return this.value.id},selectProductPics:{get:function(){var t=[];if(void 0===this.value.pic||null==this.value.pic||""===this.value.pic)return t;if(t.push(this.value.pic),void 0===this.value.albumPics||null==this.value.albumPics||""===this.value.albumPics)return t;for(var e=this.value.albumPics.split(","),i=0;i<e.length;i++)t.push(e[i]);return t},set:function(t){if(null==t||0===t.length)this.value.pic=null,this.value.albumPics=null;else if(this.value.pic=t[0],this.value.albumPics="",t.length>1)for(var e=1;e<t.length;e++)this.value.albumPics+=t[e],e!==t.length-1&&(this.value.albumPics+=",")}}},created:function(){this.getProductAttrCateList()},watch:{productId:function(t){this.isEdit&&(this.hasEditCreated||void 0!==t&&null!=t&&0!==t&&this.handleEditCreated())}},methods:{handleEditCreated:function(){null!=this.value.productAttributeCategoryId&&this.handleProductAttrChange(this.value.productAttributeCategoryId),this.hasEditCreated=!0},getProductAttrCateList:function(){var t=this;Object(f.c)({pageNum:1,pageSize:100}).then(function(e){t.productAttributeCategoryOptions=[];for(var i=e.data.list,a=0;a<i.length;a++)t.productAttributeCategoryOptions.push({label:i[a].name,value:i[a].id})})},getProductAttrList:function(t,e){var i=this,a={pageNum:1,pageSize:100,type:t};Object(m.c)(e,a).then(function(e){var a=e.data.list;if(0===t){i.selectProductAttr=[];for(var r=0;r<a.length;r++){var l=[],s=[];i.isEdit&&(1===a[r].handAddStatus&&(l=i.getEditAttrOptions(a[r].id)),s=i.getEditAttrValues(r)),i.selectProductAttr.push({id:a[r].id,name:a[r].name,handAddStatus:a[r].handAddStatus,inputList:a[r].inputList,values:s,options:l})}i.isEdit&&i.refreshProductAttrPics()}else{i.selectProductParam=[];for(var n=0;n<a.length;n++){var u=null;i.isEdit&&(u=i.getEditParamValue(a[n].id)),i.selectProductParam.push({id:a[n].id,name:a[n].name,value:u,inputType:a[n].inputType,inputList:a[n].inputList})}}})},getEditAttrOptions:function(t){for(var e=[],i=0;i<this.value.productAttributeValueList.length;i++){var a=this.value.productAttributeValueList[i];if(a.productAttributeId===t){for(var r=a.value.split(","),l=0;l<r.length;l++)e.push(r[l]);break}}return e},getEditAttrValues:function(t){var e=[];if(0===t)for(var i=0;i<this.value.skuStockList.length;i++){var a=this.value.skuStockList[i];null!=a.sp1&&-1===e.indexOf(a.sp1)&&e.push(a.sp1)}else if(1===t)for(var r=0;r<this.value.skuStockList.length;r++){var l=this.value.skuStockList[r];null!=l.sp2&&-1===e.indexOf(l.sp2)&&e.push(l.sp2)}else for(var s=0;s<this.value.skuStockList.length;s++){var n=this.value.skuStockList[s];null!=n.sp3&&-1===e.indexOf(n.sp3)&&e.push(n.sp3)}return e},getEditParamValue:function(t){for(var e=0;e<this.value.productAttributeValueList.length;e++)if(t===this.value.productAttributeValueList[e].productAttributeId)return this.value.productAttributeValueList[e].value},handleProductAttrChange:function(t){this.getProductAttrList(0,t),this.getProductAttrList(1,t)},getInputListArr:function(t){return t.split(",")},handleAddProductAttrValue:function(t){var e=this.selectProductAttr[t].options;null!=this.addProductAttrValue&&""!=this.addProductAttrValue?-1===e.indexOf(this.addProductAttrValue)?(this.selectProductAttr[t].options.push(this.addProductAttrValue),this.addProductAttrValue=null):this.$message({message:"属性值不能重复",type:"warning",duration:1e3}):this.$message({message:"属性值不能为空",type:"warning",duration:1e3})},handleRemoveProductAttrValue:function(t,e){this.selectProductAttr[t].options.splice(e,1)},getProductSkuSp:function(t,e){return 0===e?t.sp1:1===e?t.sp2:t.sp3},handleRefreshProductSkuList:function(){var t=this;this.$confirm("刷新列表将导致sku信息重新生成，是否要刷新","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.refreshProductAttrPics(),t.refreshProductSkuList()})},handleSyncProductSkuPrice:function(){var t=this;this.$confirm("将同步第一个sku的价格到所有sku,是否继续","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(null!==t.value.skuStockList&&t.value.skuStockList.length>0)for(var e=t.value.skuStockList[0].price,i=0;i<t.value.skuStockList.length;i++)t.value.skuStockList[i].price=e})},refreshProductSkuList:function(){this.value.skuStockList=[];var t=this.value.skuStockList;if(1===this.selectProductAttr.length)for(var e=this.selectProductAttr[0].values,i=0;i<e.length;i++)t.push({sp1:e[i]});else if(2===this.selectProductAttr.length)for(var a=this.selectProductAttr[0].values,r=this.selectProductAttr[1].values,l=0;l<a.length;l++)if(0!==r.length)for(var s=0;s<r.length;s++)t.push({sp1:a[l],sp2:r[s]});else t.push({sp1:a[l]});else for(var n=this.selectProductAttr[0].values,u=this.selectProductAttr[1].values,o=this.selectProductAttr[2].values,c=0;c<n.length;c++)if(0!==u.length)for(var d=0;d<u.length;d++)if(0!==o.length)for(var h=0;h<o.length;h++)t.push({sp1:n[c],sp2:u[d],sp3:o[h]});else t.push({sp1:n[c],sp2:u[d]});else t.push({sp1:n[c]})},refreshProductAttrPics:function(){if(this.selectProductAttrPics=[],this.selectProductAttr.length>=1)for(var t=this.selectProductAttr[0].values,e=0;e<t.length;e++){var i=null;this.isEdit&&(i=this.getProductSkuPic(t[e])),this.selectProductAttrPics.push({name:t[e],pic:i})}},getProductSkuPic:function(t){for(var e=0;e<this.value.skuStockList.length;e++)if(t===this.value.skuStockList[e].sp1)return this.value.skuStockList[e].pic;return null},mergeProductAttrValue:function(){this.value.productAttributeValueList=[];for(var t=0;t<this.selectProductAttr.length;t++){var e=this.selectProductAttr[t];1===e.handAddStatus&&null!=e.options&&e.options.length>0&&this.value.productAttributeValueList.push({productAttributeId:e.id,value:this.getOptionStr(e.options)})}for(var i=0;i<this.selectProductParam.length;i++){var a=this.selectProductParam[i];this.value.productAttributeValueList.push({productAttributeId:a.id,value:a.value})}},mergeProductAttrPics:function(){for(var t=0;t<this.selectProductAttrPics.length;t++)for(var e=0;e<this.value.skuStockList.length;e++)this.value.skuStockList[e].sp1===this.selectProductAttrPics[t].name&&(this.value.skuStockList[e].pic=this.selectProductAttrPics[t].pic)},getOptionStr:function(t){for(var e="",i=0;i<t.length;i++)e+=t[i],i!=t.length-1&&(e+=",");return e},handleRemoveProductSku:function(t,e){var i=this.value.skuStockList;1===i.length?i.pop():i.splice(t,1)},getParamInputList:function(t){return t.split(",")},handlePrev:function(){this.$emit("prevStep")},handleNext:function(){this.mergeProductAttrValue(),this.mergeProductAttrPics(),this.$emit("nextStep")}}},C={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"margin-top":"50px"}},[i("el-form",{ref:"productAttrForm",staticStyle:{width:"720px"},attrs:{model:t.value,"label-width":"120px",size:"small"}},[i("el-form-item",{attrs:{label:"属性类型："}},[i("el-select",{attrs:{placeholder:"请选择属性类型"},on:{change:t.handleProductAttrChange},model:{value:t.value.productAttributeCategoryId,callback:function(e){t.$set(t.value,"productAttributeCategoryId",e)},expression:"value.productAttributeCategoryId"}},t._l(t.productAttributeCategoryOptions,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"商品规格："}},[i("el-card",{staticClass:"cardBg",attrs:{shadow:"never"}},t._l(t.selectProductAttr,function(e,a){return i("div",[t._v("\n          "+t._s(e.name)+"：\n          "),0===e.handAddStatus?i("el-checkbox-group",{model:{value:t.selectProductAttr[a].values,callback:function(e){t.$set(t.selectProductAttr[a],"values",e)},expression:"selectProductAttr[idx].values"}},t._l(t.getInputListArr(e.inputList),function(t){return i("el-checkbox",{key:t,staticClass:"littleMarginLeft",attrs:{label:t}})})):i("div",[i("el-checkbox-group",{model:{value:t.selectProductAttr[a].values,callback:function(e){t.$set(t.selectProductAttr[a],"values",e)},expression:"selectProductAttr[idx].values"}},t._l(t.selectProductAttr[a].options,function(e,r){return i("div",{staticClass:"littleMarginLeft",staticStyle:{display:"inline-block"}},[i("el-checkbox",{key:e,attrs:{label:e}}),t._v(" "),i("el-button",{staticClass:"littleMarginLeft",attrs:{type:"text"},on:{click:function(e){t.handleRemoveProductAttrValue(a,r)}}},[t._v("删除\n                ")])],1)})),t._v(" "),i("el-input",{staticStyle:{width:"160px","margin-left":"10px"},attrs:{clearable:""},model:{value:t.addProductAttrValue,callback:function(e){t.addProductAttrValue=e},expression:"addProductAttrValue"}}),t._v(" "),i("el-button",{staticClass:"littleMarginLeft",on:{click:function(e){t.handleAddProductAttrValue(a)}}},[t._v("增加")])],1)],1)})),t._v(" "),i("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.value.skuStockList,border:""}},[t._l(t.selectProductAttr,function(e,a){return i("el-table-column",{key:e.id,attrs:{label:e.name,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t.getProductSkuSp(e.row,a))+"\n          ")]}}])})}),t._v(" "),i("el-table-column",{attrs:{label:"销售价格",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{model:{value:e.row.price,callback:function(i){t.$set(e.row,"price",i)},expression:"scope.row.price"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"商品库存",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{model:{value:e.row.stock,callback:function(i){t.$set(e.row,"stock",i)},expression:"scope.row.stock"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"库存预警值",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{model:{value:e.row.lowStock,callback:function(i){t.$set(e.row,"lowStock",i)},expression:"scope.row.lowStock"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"SKU编号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{model:{value:e.row.skuCode,callback:function(i){t.$set(e.row,"skuCode",i)},expression:"scope.row.skuCode"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){t.handleRemoveProductSku(e.$index,e.row)}}},[t._v("删除\n            ")])]}}])})],2),t._v(" "),i("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.handleRefreshProductSkuList}},[t._v("刷新列表\n      ")]),t._v(" "),i("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.handleSyncProductSkuPrice}},[t._v("同步价格\n      ")])],1),t._v(" "),i("el-form-item",{attrs:{label:"商品相册："}},[i("multi-upload",{model:{value:t.selectProductPics,callback:function(e){t.selectProductPics=e},expression:"selectProductPics"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"规格参数："}},[i("el-tabs",{attrs:{type:"card"},model:{value:t.activeHtmlName,callback:function(e){t.activeHtmlName=e},expression:"activeHtmlName"}},[i("el-tab-pane",{attrs:{label:"电脑端详情",name:"pc"}},[i("tinymce",{attrs:{width:595,height:300},model:{value:t.value.detailHtml,callback:function(e){t.$set(t.value,"detailHtml",e)},expression:"value.detailHtml"}})],1)],1)],1),t._v(" "),i("el-form-item",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{size:"medium"},on:{click:t.handlePrev}},[t._v("上一步，填写商品促销")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.handleNext}},[t._v("下一步，选择商品关联")])],1)],1)],1)},staticRenderFns:[]};var I=i("VU/8")(w,C,!1,function(t){i("0mkY")},"data-v-62797ff3",null).exports,O=i("0QkR");var j={name:"ProductRelationDetail",props:{value:Object,isEdit:{type:Boolean,default:!1}},data:function(){return{subjectList:[],subjectTitles:["待选择","已选择"],prefrenceAreaList:[],prefrenceAreaTitles:["待选择","已选择"]}},created:function(){this.getSubjectList(),this.getPrefrenceAreaList()},computed:{selectSubject:{get:function(){var t=[];if(null==this.value.subjectProductRelationList||this.value.subjectProductRelationList.length<=0)return t;for(var e=0;e<this.value.subjectProductRelationList.length;e++)t.push(this.value.subjectProductRelationList[e].subjectId);return t},set:function(t){this.value.subjectProductRelationList=[];for(var e=0;e<t.length;e++)this.value.subjectProductRelationList.push({subjectId:t[e]})}},selectPrefrenceArea:{get:function(){var t=[];if(null==this.value.prefrenceAreaProductRelationList||this.value.prefrenceAreaProductRelationList.length<=0)return t;for(var e=0;e<this.value.prefrenceAreaProductRelationList.length;e++)t.push(this.value.prefrenceAreaProductRelationList[e].prefrenceAreaId);return t},set:function(t){this.value.prefrenceAreaProductRelationList=[];for(var e=0;e<t.length;e++)this.value.prefrenceAreaProductRelationList.push({prefrenceAreaId:t[e]})}}},methods:{filterMethod:function(t,e){return e.label.indexOf(t)>-1},getSubjectList:function(){var t=this;Object(O.b)().then(function(e){for(var i=e.data,a=0;a<i.length;a++)t.subjectList.push({label:i[a].title,key:i[a].id})})},getPrefrenceAreaList:function(){var t=this;Object(d.a)({url:"/prefrenceArea/listAll",method:"get"}).then(function(e){for(var i=e.data,a=0;a<i.length;a++)t.prefrenceAreaList.push({label:i[a].name,key:i[a].id})})},handlePrev:function(){this.$emit("prevStep")},handleFinishCommit:function(){this.$emit("finishCommit",this.isEdit)}}},V={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"margin-top":"50px"}},[i("el-form",{ref:"productRelationForm",staticStyle:{width:"680px"},attrs:{model:t.value,"label-width":"120px",size:"small"}},[i("el-form-item",{attrs:{label:"关联专题："}},[i("el-transfer",{staticStyle:{display:"inline-block"},attrs:{filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入专题名称",titles:t.subjectTitles,data:t.subjectList},model:{value:t.selectSubject,callback:function(e){t.selectSubject=e},expression:"selectSubject"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"关联优选："}},[i("el-transfer",{staticStyle:{display:"inline-block"},attrs:{filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入优选名称",titles:t.prefrenceAreaTitles,data:t.prefrenceAreaList},model:{value:t.selectPrefrenceArea,callback:function(e){t.selectPrefrenceArea=e},expression:"selectPrefrenceArea"}})],1),t._v(" "),i("el-form-item",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{size:"medium"},on:{click:t.handlePrev}},[t._v("上一步，填写商品属性")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.handleFinishCommit}},[t._v("完成，提交商品")])],1)],1)],1)},staticRenderFns:[]};var $={albumPics:"",brandId:null,brandName:"",deleteStatus:0,description:"",detailDesc:"",detailHtml:"",detailMobileHtml:"",detailTitle:"",feightTemplateId:0,flashPromotionCount:0,flashPromotionId:0,flashPromotionPrice:0,flashPromotionSort:0,giftPoint:0,giftGrowth:0,keywords:"",lowStock:0,name:"",newStatus:0,note:"",originalPrice:0,pic:"",memberPriceList:[],productFullReductionList:[{fullPrice:0,reducePrice:0}],productLadderList:[{count:0,discount:0,price:0}],previewStatus:0,price:0,productAttributeCategoryId:null,productAttributeValueList:[],skuStockList:[],subjectProductRelationList:[],prefrenceAreaProductRelationList:[],productCategoryId:null,productCategoryName:"",productSn:"",promotionEndTime:"",promotionPerLimit:0,promotionPrice:null,promotionStartTime:"",promotionType:0,publishStatus:0,recommandStatus:0,sale:0,serviceIds:"",sort:0,stock:0,subTitle:"",unit:"",usePointLimit:0,verifyStatus:0,weight:0},E={name:"ProductDetail",components:{ProductInfoDetail:c,ProductSaleDetail:v,ProductAttrDetail:I,ProductRelationDetail:i("VU/8")(j,V,!1,function(t){i("tmAV")},"data-v-330b1389",null).exports},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{active:0,productParam:r()({},$),showStatus:[!0,!1,!1,!1]}},created:function(){var t=this;this.isEdit&&Object(n.d)(this.$route.query.id).then(function(e){t.productParam=e.data})},methods:{hideAll:function(){for(var t=0;t<this.showStatus.length;t++)this.showStatus[t]=!1},prevStep:function(){this.active>0&&this.active<this.showStatus.length&&(this.active--,this.hideAll(),this.showStatus[this.active]=!0)},nextStep:function(){this.active<this.showStatus.length-1&&(this.active++,this.hideAll(),this.showStatus[this.active]=!0)},finishCommit:function(t){var e=this;this.$confirm("是否要提交该产品","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t?Object(n.g)(e.$route.query.id,e.productParam).then(function(t){e.$message({type:"success",message:"提交成功",duration:1e3}),e.$router.back()}):Object(n.a)(e.productParam).then(function(t){e.$message({type:"success",message:"提交成功",duration:1e3}),location.reload()})})}}},R={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-card",{staticClass:"form-container",attrs:{shadow:"never"}},[i("el-steps",{attrs:{active:t.active,"finish-status":"success","align-center":""}},[i("el-step",{attrs:{title:"填写商品信息"}}),t._v(" "),i("el-step",{attrs:{title:"填写商品促销"}}),t._v(" "),i("el-step",{attrs:{title:"填写商品属性"}}),t._v(" "),i("el-step",{attrs:{title:"选择商品关联"}})],1),t._v(" "),i("product-info-detail",{directives:[{name:"show",rawName:"v-show",value:t.showStatus[0],expression:"showStatus[0]"}],attrs:{"is-edit":t.isEdit},on:{nextStep:t.nextStep},model:{value:t.productParam,callback:function(e){t.productParam=e},expression:"productParam"}}),t._v(" "),i("product-sale-detail",{directives:[{name:"show",rawName:"v-show",value:t.showStatus[1],expression:"showStatus[1]"}],attrs:{"is-edit":t.isEdit},on:{nextStep:t.nextStep,prevStep:t.prevStep},model:{value:t.productParam,callback:function(e){t.productParam=e},expression:"productParam"}}),t._v(" "),i("product-attr-detail",{directives:[{name:"show",rawName:"v-show",value:t.showStatus[2],expression:"showStatus[2]"}],attrs:{"is-edit":t.isEdit},on:{nextStep:t.nextStep,prevStep:t.prevStep},model:{value:t.productParam,callback:function(e){t.productParam=e},expression:"productParam"}}),t._v(" "),i("product-relation-detail",{directives:[{name:"show",rawName:"v-show",value:t.showStatus[3],expression:"showStatus[3]"}],attrs:{"is-edit":t.isEdit},on:{prevStep:t.prevStep,finishCommit:t.finishCommit},model:{value:t.productParam,callback:function(e){t.productParam=e},expression:"productParam"}})],1)},staticRenderFns:[]};var N=i("VU/8")(E,R,!1,function(t){i("oIh0")},null,null);e.a=N.exports},HfMK:function(t,e){},"QMc+":function(t,e){},"Uz/5":function(t,e){},bOdI:function(t,e,i){"use strict";e.__esModule=!0;var a,r=i("C4MV"),l=(a=r)&&a.__esModule?a:{default:a};e.default=function(t,e,i){return e in t?(0,l.default)(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},jHNE:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"updateProduct",components:{ProductDetail:i("CmKi").a}},r={render:function(){var t=this.$createElement;return(this._self._c||t)("product-detail",{attrs:{"is-edit":!0}})},staticRenderFns:[]};var l=i("VU/8")(a,r,!1,function(t){i("Uz/5")},null,null);e.default=l.exports},mClu:function(t,e,i){var a=i("kM2E");a(a.S+a.F*!i("+E39"),"Object",{defineProperty:i("evD5").f})},oIh0:function(t,e){},tmAV:function(t,e){}});
//# sourceMappingURL=3.66c9b35137d7c6eaddf3.js.map